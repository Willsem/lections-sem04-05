\documentclass[a4paper, 14pt]{report}

\usepackage{cmap}
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage[left=30mm, top=20mm, right=20mm, bottom=20mm, nohead, nofoot]{geometry}
\usepackage{indentfirst}

\usepackage{amsmath}
\usepackage{MnSymbol}
\usepackage{wasysym}

\usepackage{pgfplots}

\usepackage{graphicx}
\graphicspath{{img/}}
\DeclareGraphicsExtensions{.pdf}

\usepackage{tikz}
\usetikzlibrary{graphs}

\usepackage[most]{tcolorbox}
\newtcolorbox{lbox}[2][] {
    enhanced,
    sharp corners,
    colback=white,
    colbacktitle=white,
    coltitle=black,
    boxed title style={colframe=white},
    attach boxed title to top center={yshift=-3mm},
    title=#2,#1
}

\author{Рязанова Наталья Юрьевна}
\title{Операционные системы}
\date{2019}

\begin{document}
\maketitle

\tableofcontents
\clearpage

\chapter{История}

Деления на поколения можно считать очень условными.

\textbf{Компьютер} - программно управляемое устройство.

Современным ПК часть времени управляет ОС, часть времени - приложения.

\section{Первое поколение}

В 40-х годах потребность в больших, быстрых, точных вычислениях увеличилась из-за гонки вооружений.

\begin{itemize}

    \item В 1944 году в США была создана MARK I - первая вычислительная машина на электромагнитных реле.

    \item В 1946 году - первая электронно-цифровая машина на электро магнитных лампах - UNIVAK.

    \item 1945-46 гг. - создание первого поколения ЭВМ. Длился до 1955 года. Особенности: использовались электронные лампы, ЗУ на линиях задержки, ЗУ вращающегося типа, концепция хранения программ. Для ввода/вывода - перфокарты, печатающее устройство.
\end{itemize}

Первые серийные машины - MARK I, UNIVAK I, LEO I.

Все программы выполнялись в \textbf{абсолютных адресах} - адресах байта/слова (2 байта) и т.д. физической памяти. В эти же годы разработали ENIAC. В группу разработки в 1944 г. вошел Джон Фон Нейман. В 1945 г. он опубликовал доклад, в котором определены основные принципы построения компьютерной машины, которую называют компьютером. В 1946 г. - статья "Предварительная конструкция ЭВУ", в ней была описана формальная огранизация работы машины.

\textbf{Принцип хранимой программы} - данные и команды хранятся в одной памяти. Для того, чтобы к ним отбращаться, они хранятся в опредеенных адресах. Требует это счетчик команд, он хранит адрес следующей команды.

\section{Второе поколение}

С середины 50-х годов - отсчет второго поколения ЭВМ. Появились диоды и триоды (транзисторы) и ОЗУ на магнитных сердечниках.

Для серийного производства машины нужна техническая документация.

\begin{tikzpicture}
    \graph[nodes={rectangle,draw=black}, grow right sep=1em]{
        IBM 1401 -> IBM 7094 -> 1401
    };
\end{tikzpicture}

Для автоматического перескока с 1 задания на другое понадобилось специальное ПО, которое стали называть ОС. Была создана серия оберточных и отладочных программ, которые помогали программису. Для управления заданиями был разработан специальный язык - язык управления заданиями.

\section{Третье поколение}

С начала 60-х годов - 3 поколение ЭВМ. Появились микросхемы. К 3 поколению относится полноценное появление \textbf{архитектуры ЭВМ}. Появилось в связи с идеей мультипрограммными обработками и реализацией распаралеливания фукнций. Для ускорения переключения между заданиями - загрузка нескольких заданий в ОЗУ.

Большое число программ разделяет одно адресное пространство физической памяти.

\textbf{Процесс} - программа в стадии выполнения.

Перед ОС появились новые задачи, появился менеджер памяти для выделения/распределения/очищения. Нужно было обеспечить защиту защиту памяти выделенной для программы.

В 3 поколении появилась начальная архитектура. \textbf{Канал} - программно управляемое устройство, в задачи когорого входило управление внешними устройствами.

IBM 360 - машина третьего поколения.

\hfill

\begin{tikzpicture}
    \graph[nodes={align=center,rectangle,draw=black}, grow down sep, branch right sep]
    {
        Proc -> Memory ->
        {
            "Multiplex channel" -> YVV1,
            "Spector channel" -> YVV2,
            "BLOK-multiplex channel" -> YVV3
        },
        "Multiplex channel" -> Memory,
        "Spector channel" -> Memory,
        "BLOK-multiplex channel" -> Memory,
        "Multiplex channel" -> Proc,
        "Spector channel" -> Proc,
        "BLOK-multiplex channel" -> Proc,
        YVV1 -> "Multiplex channel",
        YVV2 -> "Spector channel",
        YVV3 -> "BLOK-multiplex channel"
    };
\end{tikzpicture}

\section{Прерывания}

\begin{enumerate}
    \item Системные вызовы (программные прерывания)
    \item Исключения (исключетельные ситуации)
        \begin{itemize}
            \item Исправимые
            \item Неисправимые
        \end{itemize}
    \item Аппаратные прерывания
        \begin{itemize}
            \item Таймер
            \item Ввод-вывод
            \item ОТ действий итератора
        \end{itemize}
\end{enumerate}

Прерывания являются синхронными. Программные прерывания являются асинхронными и несвязанными ни с какой другой работой в системе.

\section{Терминалы}

Операционные системы для IBM 360:

\begin{itemize}
    \item OS/360
    \item TSS/360
\end{itemize}

Для того, чтобы обеспечить комфортную работу большого числа пользователей время процессора стали квантовать. Такие системы всегда мультипрограммные (системы разделения времени). По исчетении кванта система должна решить какому процессу выделить следующий кварнт, это делается планировщиком диспетчером (организует очереть процессов, а диспетчер непосредственно выделяет память процессу). Таким образом в системах разделения времени основная функция декремент кванта. Кроме этого, таке есть ряд других важнейших функций. Обработчик прерывания выполняется на очень высоком уровне приоритетов (например в windows видно, что все прерыания от внешних устройтв принято называть девайсами приоритет выше, чем dpc/dispath). Выполнение обработчика прерывания никакой процесс прервать не может, поэтому код должен завершатся быстрее. В результате каждый пользователь раотал независимо от других. Система должна гарантировать время ответа. Система должна была успевать найти ошибку в программе или запрос ввода вывода. TSS была очень медленная и была разработана другая ОС \textbf{CP/CMS}.

OS Multies на платформе 6000 series Multiplexed Information and computing service. Изачально создавалась как система замера времени и стала прародителем UNIX.

Уже IBM 360 разрабатывалась как серия машин (то есть имели разный состав переферии и мощность). Также очень сильно отразилось на программировании, что IBM разделила стоимости харда и софта.

\section{Виды системного ПО}

\begin{itemize}
    \item Системное программное обеспечение - ОС и утилиты ОС
    \item Системы программирования
\end{itemize}

\section{Четвертое поколение}

Начало четвертого поколения относится к 1970 году. Это уже большие интегральные схемы, меняются элементы памяти, объем запоминающего устройства увеличивается, габариты уменшаются, мощность увеличивается.

Для формирования изображения используется смена интенсивности пикселя растра (телевизионная развертка).

Появление IBM 370

\begin{center}
    \begin{tabular}{|c|c|c|}
        \hline
        Виртуальн 370 & Виртуальн 370 & Виртуальн 370 \\
        \hline
        CMS & CMS & CMS \\
        \hline
        \multicolumn{3}{|c|}{VM 370} \\
        \hline
        \multicolumn{3}{|c|}{Аппаратное обеспечение 370} \\
        \hline
    \end{tabular}
\end{center}

PDP-11 уже почти современный UNIX. Перваначатьно UNIX называлась UNICS (что обыгравало название MULTICS).

API. Каждая из фирм становилась монополистом.

UNIX сразу писалась как система времени. POSIX (portable operating system interface). Был предложен стандарт IEEE.

Ричард Столмен является основателем проекта GNU. GNU это рекурсивный акроним от английского GNU'S not UNIX. Свои работы начал 1983 году и его задачей было разраотать ПО с открытым исходным кодом. В 1992 году Линус Торвальдс начал разработку ОС под той же системой. На сегодняшний день это GNU Linux.

В 1964 году Сеймуром Крейем был создан первый компьютер СДС 6600. В 1972 году он основал свою первую собственную фирму Kreiry Search, там он создал самые быстрые компьютеры Krei 1 и Krei 2. Первый был первым коммерчески успешным векторным компьютером.

\section{Эра сверхбольших интегральным схем}

Очень мощные машины, способные решать очень широкий круг задач

Современные операционные системы являются системами разделения времени.

\section{Дисциплины курса}

\begin{enumerate}
    \item Управление процессорами
    \item Управление памятью (оперативная память)
    \item Взаимодействие параллельных процессов
    \item Управление данными (файловые подсистемы)
    \item Управление внешними устройствами (В UNIX все - файл)
\end{enumerate}

\section{Операционная система}

\textbf{Операционная система} - это комплект программ, которые совместно управляют ресурсами вычислительной системы и процессами, использующим эти ресурсы при вычислениях.

\textbf{Ресурс} - это любой из компонентов вычислительной системы и предаставляемые ею возможности.

Управление ресурсами заключается в том, что выделяются ресурсы процессом (основная задача ОС). Процессы создаются по мере необходимости, ресурсы выделяются по мере надобности.

\subsection{Главные ресурсы программы}

\begin{enumerate}
    \item Процессорное время
    \item Объем памяти
    \item Ключи защиты
    \item Системные таблицы
    \item Реентирабельные коды - переход чистой процедуры (которая не изменяет саму себя)
\end{enumerate}

\subsection{Классификация ОС}

\begin{enumerate}
    \item Однопрограммная пакетной обработки
    \item Мультипрограммной пакетной обработки
    \item Системы разделения времени

        \begin{tikzpicture}
            \graph[nodes={rectangle,draw=black}, grow right sep=1em]{
                Proc -> Terminals
            };
        \end{tikzpicture}

    \item Системы реального времени
    \item Персональные операционные системы
\end{enumerate}

\subsection{Системы реального времени}

\textbf{Реальное время в операционных системах} - это способность операционной системы обеспечить требуемый уровень сервиса в определенный промежуток времени в отличие от систем общего назначения. ОСРВ обеспечивает ответ системы за определенный промежуток времени, то есть обслуживание запроса и это всегда запрос системы или внешнего процесса.

\begin{itemize}
    \item Жесткое реальное время - это когда интервал установлен жестко и не может быть превышен.

    \item Мягкое реальное время - возможность небольших отклонений от велечины интервала.
\end{itemize}

Время ответа зависит от внешнего для системы объекта. Например, высчитывается химическая реакция которая длится месяц.

\chapter{Разработка операционных систем и их особенности}

\section{Иерархическая структура операционной системы}

\begin{center}
    \includegraphics{os1}
\end{center}

Интерфейсы разделяются на:

\begin{itemize}
    \item Прозрачные - позволяет обращаться через уровни
    \item Полупрозрачные - какие то обращения доступны к вышележащему уровню
    \item Непрозрачные - строго к низлежащему уровню
\end{itemize}

\begin{table}
    \caption{Структура ядра ОС UNIX 4.4 BSD}
    \begin{center}
        \begin{tabular}{|c|c|c|c|c|c|c|c|c|}
            \hline
            \multicolumn{2}{|c|}{Системные вызовы} & Аппаратные и эмулированные прерывания & Системные вызовы & \multicolumn{2}{|c|}{Аппаратные и эмулированные прерывания} \\
            \hline

        \end{tabular}
\end{center}
\end{table}

\section{Управление процессорами}

Планирование и диспетчеризация процесса в процессе чего выделяется процессорное время.

\textbf{Планирование} (scheduling) - это постановка процесса в очередь на выполнение.

\textbf{Диспетчеризация} - непосредственно выделение процессу процессорного времени.

\subsection{Диаграмма состояния процесса}

Основная таблица - таблица процессов, она содержит дескрипторы (описатели)
процессов. Идентификатором процесса является номер строки в таблице процессов 
(порядковый номер)

\begin{center}
    \includegraphics[scale=0.7]{os2}
\end{center}

В состоянии готовности находится большое количество процессов, которым необхоимо выделить процессорное время. Очередь выстраивается в соответствии с реализованний в системе дисциплиной планирования.

\end{document}
